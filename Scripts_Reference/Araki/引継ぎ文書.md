# 無題

作成日時: 2025年3月19日

# 引継ぎ的なもの

## 研究の概要

---

- 点群のライブストリーミングに関する研究をしていました。
- 点群を分割し、個別に送信することによって、再生が停止しないような手法を提案しています。
- ２台のPCを用意し、実機でストリーミング環境を実装し評価を行っています。

## システムの概要

---

![image.png](image.png)

1. サーバー側のPCで点群を撮影して生成
2. サーバーで点群を圧縮
3. 受信側のPCからサーバーに点群をリクエスト
4. サーバーはリクエストに応じた点群を送信。受信側のPCでレンダリング

## システムの動かし方

---

ファイル名はだいぶ適当なので適宜変更してください。

### サーバ側

`\\bandailab-nas\Public\OB_OG\2024年度卒業生\Araki\M2\プログラム\サーバー側PC` にプログラムがあります。

- 点群の取得方法
    1. RealSense D455をPCに接続して`cap_pc.py`を起動。
    2. ウィンドウが立ち上がるので、sキーを入力すると撮影開始。
    3. escキーを押すか、指定枚数撮影するとプログラム終了。
- 点群のダウンサンプリング
    1. ダウンサンプリングする方法に応じて、`down_sample.py` のプログラムを編集。
    2. `down_sample.py` を実行。
- サーバーの起動
    1. `./app/hoge.py` を実行
        1. コマンドプロンプトで`uvicorn app.hoge:app --host 0.0.0.0 --port 8000` と入力すれば起動できます。
    2. ctrl+cキーでサーバーを停止できます。
    - dockerを使う場合
        1. コマンドプロンプトで`docker compose up` と入力。
        2. 自動的にサーバーが立ち上がる。
        3. ctrl+cキーでdockerコンテナとサーバーを停止できます。

### クライアント側

`\\bandailab-nas\Public\OB_OG\2024年度卒業生\Araki\M2\プログラム\クライアント側PC\pointcloud_streaming_Unity` にプログラムがあります。

- 点群のリクエストとレンダリング
    1. unityで`pointcloud_streaming_Unity` のプロジェクトを開く。
    2. `pointcloud_streaming_Unity\Assets\Scenes\SampleScene.unity` にあるシーンを開く。(既に開かれてるかも)
    3. unityの再生ボタンを押す。
        1. `pointcloud_streaming_Unity\Assets\Scripts\Download.cs` にダウンロード用のスクリプトが、`pointcloud_streaming_Unity\Assets\Scripts\Rendering.cs` にレンダリング用のスクリプトがあります。
    4. サーバーへの点群リクエストが始まり、ダウンロードした点群ファイルがunity上にレンダリングされます。